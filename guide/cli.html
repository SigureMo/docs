<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>命令行参数 | yutto</title>
    <meta name="description" content="yutto docs">
    <meta name="generator" content="VitePress v1.3.4">
    <link rel="preload stylesheet" href="/assets/style.f5oi2Aep.css" as="style">
    
    <script type="module" src="/assets/app.DO_Eb4F4.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.glSeAOOo.js">
    <link rel="modulepreload" href="/assets/chunks/framework.DX7EX5Ix.js">
    <link rel="modulepreload" href="/assets/guide_cli.md.DXbEQzDD.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><!--[--><div class="Layout" data-v-05341765><!--[--><!--]--><!--[--><span tabindex="-1" data-v-f249bfa7></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-f249bfa7> Skip to content </a><!--]--><!----><header class="VPNav" data-v-05341765 data-v-b4966287><div class="VPNavBar" data-v-b4966287 data-v-c9eaef18><div class="wrapper" data-v-c9eaef18><div class="container" data-v-c9eaef18><div class="title" data-v-c9eaef18><div class="VPNavBarTitle has-sidebar" data-v-c9eaef18 data-v-db1b6e2a><a class="title" href="/" data-v-db1b6e2a><!--[--><!--]--><!----><span data-v-db1b6e2a>yutto</span><!--[--><!--]--></a></div></div><div class="content" data-v-c9eaef18><div class="content-body" data-v-c9eaef18><!--[--><!--]--><div class="VPNavBarSearch search" data-v-c9eaef18><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-c9eaef18 data-v-eac8649a><span id="main-nav-aria-label" class="visually-hidden" data-v-eac8649a> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-eac8649a data-v-afa0cfa6><!--[--><span data-v-afa0cfa6>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/quick-start.html" tabindex="0" data-v-eac8649a data-v-afa0cfa6><!--[--><span data-v-afa0cfa6>指引</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/migration/" tabindex="0" data-v-eac8649a data-v-afa0cfa6><!--[--><span data-v-afa0cfa6>迁移</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-c9eaef18 data-v-96e54335><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-96e54335 data-v-2aeb8eef data-v-cfbd78cc><span class="check" data-v-cfbd78cc><span class="icon" data-v-cfbd78cc><!--[--><span class="vpi-sun sun" data-v-2aeb8eef></span><span class="vpi-moon moon" data-v-2aeb8eef></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-c9eaef18 data-v-a90ac872 data-v-9270197e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yutto-dev/yutto" aria-label="github" target="_blank" rel="noopener" data-v-9270197e data-v-2c3c0069><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://discord.gg/5cQGyFwsqC" aria-label="discord" target="_blank" rel="noopener" data-v-9270197e data-v-2c3c0069><span class="vpi-social-discord" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-c9eaef18 data-v-a8130b1f data-v-713d7c50><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-713d7c50><span class="vpi-more-horizontal icon" data-v-713d7c50></span></button><div class="menu" data-v-713d7c50><div class="VPMenu" data-v-713d7c50 data-v-f3bea8e6><!----><!--[--><!--[--><!----><div class="group" data-v-a8130b1f><div class="item appearance" data-v-a8130b1f><p class="label" data-v-a8130b1f>Appearance</p><div class="appearance-action" data-v-a8130b1f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-a8130b1f data-v-2aeb8eef data-v-cfbd78cc><span class="check" data-v-cfbd78cc><span class="icon" data-v-cfbd78cc><!--[--><span class="vpi-sun sun" data-v-2aeb8eef></span><span class="vpi-moon moon" data-v-2aeb8eef></span><!--]--></span></span></button></div></div></div><div class="group" data-v-a8130b1f><div class="item social-links" data-v-a8130b1f><div class="VPSocialLinks social-links-list" data-v-a8130b1f data-v-9270197e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yutto-dev/yutto" aria-label="github" target="_blank" rel="noopener" data-v-9270197e data-v-2c3c0069><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://discord.gg/5cQGyFwsqC" aria-label="discord" target="_blank" rel="noopener" data-v-9270197e data-v-2c3c0069><span class="vpi-social-discord" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-c9eaef18 data-v-4fb37225><span class="container" data-v-4fb37225><span class="top" data-v-4fb37225></span><span class="middle" data-v-4fb37225></span><span class="bottom" data-v-4fb37225></span></span></button></div></div></div></div><div class="divider" data-v-c9eaef18><div class="divider-line" data-v-c9eaef18></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-05341765 data-v-9fdcaccb><div class="container" data-v-9fdcaccb><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-9fdcaccb><span class="vpi-align-left menu-icon" data-v-9fdcaccb></span><span class="menu-text" data-v-9fdcaccb>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-9fdcaccb data-v-368bfbe9><button data-v-368bfbe9>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-05341765 data-v-169b4af8><div class="curtain" data-v-169b4af8></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-169b4af8><span class="visually-hidden" id="sidebar-aria-label" data-v-169b4af8> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-f3c44c4c><section class="VPSidebarItem level-0 has-active" data-v-f3c44c4c data-v-467cfa2a><!----><div class="items" data-v-467cfa2a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-467cfa2a data-v-467cfa2a><div class="item" data-v-467cfa2a><div class="indicator" data-v-467cfa2a></div><a class="VPLink link link" href="/guide/quick-start.html" data-v-467cfa2a><!--[--><p class="text" data-v-467cfa2a>快速开始</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-467cfa2a data-v-467cfa2a><div class="item" data-v-467cfa2a><div class="indicator" data-v-467cfa2a></div><a class="VPLink link link" href="/guide/supported-links.html" data-v-467cfa2a><!--[--><p class="text" data-v-467cfa2a>支持的链接</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-467cfa2a data-v-467cfa2a><div class="item" data-v-467cfa2a><div class="indicator" data-v-467cfa2a></div><a class="VPLink link link" href="/guide/cli.html" data-v-467cfa2a><!--[--><p class="text" data-v-467cfa2a>命令行参数</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-05341765 data-v-997ff717><div class="VPDoc has-sidebar has-aside" data-v-997ff717 data-v-bbd403a1><!--[--><!--]--><div class="container" data-v-bbd403a1><div class="aside" data-v-bbd403a1><div class="aside-curtain" data-v-bbd403a1></div><div class="aside-container" data-v-bbd403a1><div class="aside-content" data-v-bbd403a1><div class="VPDocAside" data-v-bbd403a1 data-v-7597a6ef><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-7597a6ef data-v-f816beb6><div class="content" data-v-f816beb6><div class="outline-marker" data-v-f816beb6></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f816beb6>On this page</div><ul class="VPDocOutlineItem root" data-v-f816beb6 data-v-22dabe7d><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-7597a6ef></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-bbd403a1><div class="content-container" data-v-bbd403a1><!--[--><!--]--><main class="main" data-v-bbd403a1><div style="position:relative;" class="vp-doc _guide_cli" data-v-bbd403a1><div><h1 id="命令行参数" tabindex="-1">命令行参数 <a class="header-anchor" href="#命令行参数" aria-label="Permalink to &quot;命令行参数&quot;">​</a></h1><h2 id="基础参数" tabindex="-1">基础参数 <a class="header-anchor" href="#基础参数" aria-label="Permalink to &quot;基础参数&quot;">​</a></h2><p>yutto 支持一些基础参数，无论是批量下载还是单视频下载都适用。</p><h3 id="最大并行-worker-数量" tabindex="-1">最大并行 worker 数量 <a class="header-anchor" href="#最大并行-worker-数量" aria-label="Permalink to &quot;最大并行 worker 数量&quot;">​</a></h3><ul><li>参数 <code>-n</code> 或 <code>--num-workers</code></li><li>默认值 <code>8</code></li></ul><p>与 bilili 先輩不同的是，我并不是使用多线程实现并行下载，而是使用协程实现的，本参数限制的是网络请求最大并发量。</p><h3 id="指定视频清晰度等级" tabindex="-1">指定视频清晰度等级 <a class="header-anchor" href="#指定视频清晰度等级" aria-label="Permalink to &quot;指定视频清晰度等级&quot;">​</a></h3><ul><li>参数 <code>-q</code> 或 <code>--video-quality</code></li><li>可选值 <code>127 | 126 | 125 | 120 | 116 | 112 | 80 | 74 | 64 | 32 | 16</code></li><li>默认值 <code>127</code></li></ul><p>清晰度对应关系如下</p><table tabindex="0"><thead><tr><th style="text-align:center;">code</th><th style="text-align:center;">清晰度</th></tr></thead><tbody><tr><td style="text-align:center;">127</td><td style="text-align:center;">8K 超高清</td></tr><tr><td style="text-align:center;">126</td><td style="text-align:center;">杜比视界</td></tr><tr><td style="text-align:center;">125</td><td style="text-align:center;">HDR 真彩</td></tr><tr><td style="text-align:center;">120</td><td style="text-align:center;">4K 超清</td></tr><tr><td style="text-align:center;">116</td><td style="text-align:center;">1080P 60帧</td></tr><tr><td style="text-align:center;">112</td><td style="text-align:center;">1080P 高码率</td></tr><tr><td style="text-align:center;">80</td><td style="text-align:center;">1080P 高清</td></tr><tr><td style="text-align:center;">74</td><td style="text-align:center;">720P 60帧</td></tr><tr><td style="text-align:center;">64</td><td style="text-align:center;">720P 高清</td></tr><tr><td style="text-align:center;">32</td><td style="text-align:center;">480P 清晰</td></tr><tr><td style="text-align:center;">16</td><td style="text-align:center;">360P 流畅</td></tr></tbody></table><p>并不是说指定某个清晰度就一定会下载该清晰度的视频，我只会尽可能满足你的要求，如果不存在指定的清晰度，我就会按照默认的清晰度搜索机制进行调节，比如指定清晰度为 <code>80</code>，<strong>首先会依次降清晰度搜索</strong> <code>74</code>、<code>64</code>、<code>32</code>、<code>16</code>，如果依然找不到合适的则<strong>继续升清晰度搜索</strong> <code>112</code>、<code>116</code>、<code>120</code>、<code>125</code>、<code>126</code>、<code>127</code>。</p><p>值得注意的是，目前杜比视界视频只能简单下载音视频流并合并，合并后并不能达到在线观看的效果。</p><h3 id="指定音频码率等级" tabindex="-1">指定音频码率等级 <a class="header-anchor" href="#指定音频码率等级" aria-label="Permalink to &quot;指定音频码率等级&quot;">​</a></h3><ul><li>参数 <code>-aq</code> 或 <code>--audio-quality</code></li><li>可选值 <code>30280 | 30232 | 30216</code></li><li>默认值 <code>30280</code></li></ul><p>码率对应关系如下</p><table tabindex="0"><thead><tr><th style="text-align:center;">code</th><th style="text-align:center;">码率</th></tr></thead><tbody><tr><td style="text-align:center;">30280</td><td style="text-align:center;">320kbps</td></tr><tr><td style="text-align:center;">30232</td><td style="text-align:center;">128kbps</td></tr><tr><td style="text-align:center;">30216</td><td style="text-align:center;">64kbps</td></tr></tbody></table><p>码率自动调节机制与视频清晰度一致，也采用先降后升的匹配机制。</p><h3 id="指定视频编码" tabindex="-1">指定视频编码 <a class="header-anchor" href="#指定视频编码" aria-label="Permalink to &quot;指定视频编码&quot;">​</a></h3><ul><li>参数 <code>--vcodec</code></li><li>下载编码可选值 <code>&quot;av1&quot; | &quot;hevc&quot; | &quot;avc&quot;</code></li><li>保存编码可选值 FFmpeg 所有可用的视频编码器</li><li>默认值 <code>&quot;avc:copy&quot;</code></li></ul><p>该参数略微复杂，前半部分表示在下载时<strong>优先</strong>选择哪一种编码的视频流，后半部分则表示在合并时如何编码视频流，两者使用 <code>:</code> 分隔。</p><p>值得注意的是，前半的下载编码只是优先下载的编码而已，如果不存在该编码，则仍会像视频清晰度调节机制一样自动选择其余编码。</p><p>而后半部分的参数如果设置成非 <code>copy</code> 的值则可以确保在下载完成后对其进行重新编码，而且不止支持 <code>av1</code>、<code>hevc</code> 与 <code>avc</code>，只要你的 FFmpeg 支持的视频编码器，它都可以完成。</p><h3 id="指定音频编码" tabindex="-1">指定音频编码 <a class="header-anchor" href="#指定音频编码" aria-label="Permalink to &quot;指定音频编码&quot;">​</a></h3><ul><li>参数 <code>--acodec</code></li><li>下载编码可选值 <code>&quot;mp4a&quot;</code></li><li>保存编码可选值 FFmpeg 所有可用的音频编码器</li><li>默认值 <code>&quot;mp4a:copy&quot;</code></li></ul><p>详情同视频编码。</p><h3 id="仅下载视频流" tabindex="-1">仅下载视频流 <a class="header-anchor" href="#仅下载视频流" aria-label="Permalink to &quot;仅下载视频流&quot;">​</a></h3><ul><li>参数 <code>--video-only</code></li><li>默认值 <code>False</code></li></ul><h3 id="仅下载音频流" tabindex="-1">仅下载音频流 <a class="header-anchor" href="#仅下载音频流" aria-label="Permalink to &quot;仅下载音频流&quot;">​</a></h3><ul><li>参数 <code>--audio-only</code></li><li>默认值 <code>False</code></li></ul><p>仅下载其中的音频流，保存为 <code>.aac</code> 文件。</p><p>值得注意的是，在不选择视频流时，嵌入字幕、弹幕功能将无法工作。</p><h3 id="弹幕格式选择" tabindex="-1">弹幕格式选择 <a class="header-anchor" href="#弹幕格式选择" aria-label="Permalink to &quot;弹幕格式选择&quot;">​</a></h3><ul><li>参数 <code>-df</code> 或 <code>--danmaku-format</code></li><li>可选值 <code>&quot;ass&quot; | &quot;xml&quot; | &quot;protobuf&quot;</code></li><li>默认值 <code>&quot;ass&quot;</code></li></ul><p>B 站提供了 <code>xml</code> 与 <code>protobuf</code> 两种弹幕数据接口，我会自动下载 <code>xml</code> 格式弹幕并转换为 <code>ass</code> 格式，如果你不喜欢我自动转换的效果，可以选择输出格式为 <code>xml</code> 或 <code>protobuf</code>，手动通过一些工具进行转换，比如我和 bilili 所使用的 <a href="https://github.com/ShigureLab/biliass" target="_blank" rel="noreferrer">biliass</a>，或者使用 <a href="https://tiansh.github.io/us-danmaku/bilibili/" target="_blank" rel="noreferrer">us-danmaku</a> 进行在线转换。</p><p>如果你不想下载弹幕，只需要使用参数 <code>--no-danmaku</code> 即可。</p><h3 id="下载块大小" tabindex="-1">下载块大小 <a class="header-anchor" href="#下载块大小" aria-label="Permalink to &quot;下载块大小&quot;">​</a></h3><ul><li>参数 <code>-bs</code> 或 <code>--block-size</code></li><li>默认值 <code>0.5</code></li></ul><p>以 MiB 为单位，为分块下载时各块大小，不建议更改。</p><h3 id="强制覆盖已下载文件" tabindex="-1">强制覆盖已下载文件 <a class="header-anchor" href="#强制覆盖已下载文件" aria-label="Permalink to &quot;强制覆盖已下载文件&quot;">​</a></h3><ul><li>参数 <code>-w</code> 或 <code>--overwrite</code></li><li>默认值 <code>False</code></li></ul><h3 id="代理设置" tabindex="-1">代理设置 <a class="header-anchor" href="#代理设置" aria-label="Permalink to &quot;代理设置&quot;">​</a></h3><ul><li>参数 <code>-x</code> 或 <code>--proxy</code></li><li>可选值 <code>&quot;auto&quot; | &quot;no&quot; | &lt;https?://url/to/proxy/server&gt;</code></li><li>默认值 <code>&quot;auto&quot;</code></li></ul><p>设置代理服务器，默认是从环境变量读取，<code>no</code> 则为不设置代理，设置其它 http/https url 则将其作为代理服务器。</p><h3 id="存放根目录" tabindex="-1">存放根目录 <a class="header-anchor" href="#存放根目录" aria-label="Permalink to &quot;存放根目录&quot;">​</a></h3><ul><li>参数 <code>-d</code> 或 <code>--dir</code></li><li>默认值 <code>&quot;./&quot;</code></li></ul><h3 id="临时文件目录" tabindex="-1">临时文件目录 <a class="header-anchor" href="#临时文件目录" aria-label="Permalink to &quot;临时文件目录&quot;">​</a></h3><ul><li>参数 <code>--tmp-dir</code></li><li>默认值是“存放根目录”即 <code>-d, --dir</code> 的值</li></ul><h3 id="存放子路径模板" tabindex="-1">存放子路径模板 <a class="header-anchor" href="#存放子路径模板" aria-label="Permalink to &quot;存放子路径模板&quot;">​</a></h3><ul><li>参数 <code>-tp</code> 或 <code>--subpath-template</code></li><li>可选参数变量 <code>title | id | name | username | series_title | pubdate</code> （以后可能会有更多）</li><li>默认值 <code>&quot;{auto}&quot;</code></li></ul><p>通过配置子路径模板可以灵活地控制视频存放位置。</p><p>默认情况是由 yutto 自动控制存放位置的。比如下载单个视频时默认就是直接存放在设定的根目录，不会创建一层容器目录，此时自动选择了 <code>{name}</code> 作为模板；而批量下载时则会根据视频层级生成多级目录，比如番剧会是 <code>{title}/{name}</code>，首先会在设定根目录里生成一个番剧名的目录，其内才会存放各个番剧剧集视频，这样方便了多个不同番剧的管理。当然，如果你仍希望将番剧直接存放在设定根目录下的话，可以修改该参数值为 <code>{name}</code>即可。</p><p>另外，该功能语法由 Python format 函数模板语法提供，所以也支持一些高级的用法，比如 <code>{id:0&gt;3}{name}</code>。</p><p>值得注意的是，并不是所有变量在各种场合下都会提供，比如 <code>username</code> 变量当前仅在 UP 主全部投稿视频/收藏夹才提供，在其它情况下不应使用它。各变量详细作用域描述见下表：</p><table tabindex="0"><thead><tr><th>Variable</th><th>Description</th><th>Scope</th></tr></thead><tbody><tr><td>title</td><td>系列视频总标题（番剧名/投稿视频标题）</td><td>全部</td></tr><tr><td>id</td><td>系列视频单 p 顺序标号</td><td>全部</td></tr><tr><td>name</td><td>系列视频单 p 标题</td><td>全部</td></tr><tr><td>username</td><td>UP 主用户名</td><td>个人空间、收藏夹、合集、视频列表下载</td></tr><tr><td>series_title</td><td>合集标题</td><td>收藏夹、视频合集、视频列表下载</td></tr><tr><td>pubdate</td><td>投稿日期</td><td>仅投稿视频</td></tr></tbody></table><blockquote><p>未来可能会对路径变量及默认路径模板进行调整</p></blockquote><h3 id="url-别名文件路径" tabindex="-1">url 别名文件路径 <a class="header-anchor" href="#url-别名文件路径" aria-label="Permalink to &quot;url 别名文件路径&quot;">​</a></h3><ul><li>参数 <code>-af</code> 或 <code>--alias-file</code></li><li>默认值 <code>None</code></li></ul><p>指定别名文件路径，别名文件中存放一个别名与其对应的 url，使用空格或者 <code>=</code> 分隔，示例如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>rimuru1=https://www.bilibili.com/bangumi/play/ss25739/</span></span>
<span class="line"><span>rimuru2=https://www.bilibili.com/bangumi/play/ss36170/</span></span>
<span class="line"><span>rimuru-nikki=https://www.bilibili.com/bangumi/play/ss38221/</span></span></code></pre></div><p>比如将上述内容存储到 <code>~/.yutto_alias</code>，则通过以下命令即可解析该文件：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yutto</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rimuru1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --alias-file=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;~/.yutto_alias&#39;</span></span></code></pre></div><p>当参数值为 <code>-</code> 时，会从标准输入中读取：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.yutto_alias</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> yutto</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rimuru-nikki</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --alias-file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span></span></code></pre></div><h3 id="cookies-设置" tabindex="-1">Cookies 设置 <a class="header-anchor" href="#cookies-设置" aria-label="Permalink to &quot;Cookies 设置&quot;">​</a></h3><ul><li>参数 <code>-c</code> 或 <code>--sessdata</code></li><li>默认值 <code>&quot;&quot;</code></li></ul><p>设置 Cookies 后你才可以下载更高清晰度以及更多的剧集，当你传入你的大会员 <code>SESSDATA</code> 时（当然前提是你是大会员），你就可以下载大会员可访问的资源咯。</p><details class="details custom-block"><summary>SESSDATA 获取方式</summary><p>这里用 Chrome 作为示例，其它浏览器请尝试类似方法。</p><p>首先，用你的帐号登录 B 站，然后随便打开一个 B 站网页，比如<a href="https://www.bilibili.com/" target="_blank" rel="noreferrer">首页</a>。</p><p>按 F12 打开开发者工具，切换到 Network 栏，刷新页面，此时第一个加载的资源应该就是当前页面的 html，选中该资源，在右侧 「Request Headers」 中找到 「cookie」，在其中找到类似于 <code>SESSDATA=d8bc7493%2C2843925707%2C08c3e*81;</code> 的一串字符串，复制这里的 <code>d8bc7493%2C2843925707%2C08c3e*81</code>，这就是你需要的 <code>SESSDATA</code>。</p></details><p>另外，由于 SESSDATA 中可能有特殊符号，所以传入时你可能需要使用双引号来包裹</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yutto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;d8bc7493%2C2843925707%2C08c3e*81&quot;</span></span></code></pre></div><p>当然，示例里的 SESSDATA 是无效的，请使用自己的 SESSDATA。</p><h3 id="不下载弹幕" tabindex="-1">不下载弹幕 <a class="header-anchor" href="#不下载弹幕" aria-label="Permalink to &quot;不下载弹幕&quot;">​</a></h3><ul><li>参数 <code>--no-danmaku</code></li><li>默认值 <code>False</code></li></ul><h3 id="不下载字幕" tabindex="-1">不下载字幕 <a class="header-anchor" href="#不下载字幕" aria-label="Permalink to &quot;不下载字幕&quot;">​</a></h3><ul><li>参数 <code>--no-subtitle</code></li><li>默认值 <code>False</code></li></ul><h3 id="不显示颜色" tabindex="-1">不显示颜色 <a class="header-anchor" href="#不显示颜色" aria-label="Permalink to &quot;不显示颜色&quot;">​</a></h3><ul><li>参数 <code>--no-color</code></li><li>默认值 <code>False</code></li></ul><h3 id="启用-debug-模式" tabindex="-1">启用 Debug 模式 <a class="header-anchor" href="#启用-debug-模式" aria-label="Permalink to &quot;启用 Debug 模式&quot;">​</a></h3><ul><li>参数 <code>--debug</code></li><li>默认值 <code>False</code></li></ul><h3 id="生成媒体元数据文件" tabindex="-1">生成媒体元数据文件 <a class="header-anchor" href="#生成媒体元数据文件" aria-label="Permalink to &quot;生成媒体元数据文件&quot;">​</a></h3><ul><li>参数 <code>--with-metadata</code></li><li>默认值 <code>False</code></li></ul><div class="warning custom-block"><p class="custom-block-title">⚠️ 注意</p><p>目前媒体元数据生成尚在试验阶段，可能提取出的信息并不完整。</p></div><h2 id="批量参数" tabindex="-1">批量参数 <a class="header-anchor" href="#批量参数" aria-label="Permalink to &quot;批量参数&quot;">​</a></h2><p>有些参数是只有批量下载时才可以使用的</p><h3 id="启用批量下载" tabindex="-1">启用批量下载 <a class="header-anchor" href="#启用批量下载" aria-label="Permalink to &quot;启用批量下载&quot;">​</a></h3><ul><li>参数 <code>-b</code> 或 <code>--batch</code></li><li>默认值 <code>False</code></li></ul><p>只需要 <code>yutto --batch &lt;url&gt;</code> 即可启用批量下载功能。</p><h3 id="选集" tabindex="-1">选集 <a class="header-anchor" href="#选集" aria-label="Permalink to &quot;选集&quot;">​</a></h3><ul><li><p>参数 <code>-p</code> 或 <code>--episodes</code></p></li><li><p>默认值 <code>^~$</code></p></li><li><p>参数 <code>-p</code> 或 <code>--episodes</code></p></li><li><p>默认值 <code>^~$</code>（也即全选）</p></li></ul><p>也就是选集咯，其语法是这样的</p><ul><li><code>&lt;p1&gt;</code> 单独下某一剧集 <ul><li>支持负数来选择倒数第几话</li><li>此外还可以使用 <code>^</code> 与 <code>$</code> 来分别代表 <code>1</code> 与 <code>-1</code></li></ul></li><li><code>&lt;p_start&gt;~&lt;p_end&gt;</code> 使用 <code>~</code> 可以连续选取</li><li><code>&lt;p1&gt;,&lt;p2&gt;,&lt;p3&gt;,...,&lt;pn&gt;</code> 使用 <code>,</code> 可以不连续选取</li></ul><p>emmm，直接看的话大概并不能知道我在说什么，所以我们通过几个小例子来了解其语法</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 假设要下载一个具有 24 话的番剧</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 如果我们只想下载第 3 话，只需要这样</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yutto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 那如果我想下载第 5 话到第 7 话呢，使用 `~` 可以连续选中</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yutto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 5~7</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 那我想下载第 12 话和第 17 话又要怎么办？此时只需要 `,` 就可以将多个不连续的选集一起选中</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yutto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 12,17</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 那我突然又想将刚才那些都选中了呢？还是使用 `,` 呀，将它们连在一起即可</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yutto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3,5~7,12,17</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 嗯，你已经把基本用法都了解过了，很简单吧～</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 下面是一些语法糖，不了解也完全不会影响任何功能哒～</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 那如果我只知道我想下载倒数第 3 话，而不想算倒数第三话是第几话应该怎么办？</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 此时可以用负数哒～不过要注意的是，开头如果是 `-` 的话前面应该使用 `=`</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yutto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p=-3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 那么如果想下载最后一话你可能会想到 `-p=-1` 对吧？不过我内置了两个符号分别代表第一话（^）和最后一话（$）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 像下面这样就可以直接下载最后一话啦～</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yutto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 所有语法都了解完啦，我们看一个稍微复杂的例子</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yutto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ^~3,10,12~14,16,-4~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 很明显，上面的例子就是下载前 3 话、第 10 话、第 12 到 14 话、第 16 话以及后 4 话</span></span></code></pre></div><p>下面是一些要注意的问题</p><ol><li>这里使用的序号是视频的顺序序号，而不是番剧所标注的<code>第 n 话</code>，因为有可能会出现 <code>第 x.5 话</code> 等等的特殊情况，此时一定要按照顺序自行计数。</li><li>参数值里一定不要加空格</li><li>参数值开头为 <code>-</code> 时前面应该使用 <code>=</code> 而非空格</li><li>个人空间、合集、收藏夹等批量下载暂不支持选集操作</li></ol><h3 id="同时下载附加剧集" tabindex="-1">同时下载附加剧集 <a class="header-anchor" href="#同时下载附加剧集" aria-label="Permalink to &quot;同时下载附加剧集&quot;">​</a></h3><ul><li>参数 <code>-s</code> 或 <code>--with-section</code></li><li>默认值 <code>False</code></li></ul><p>批量下载时包含非「正片」的「PV&amp;其他」等的额外内容部分，仅限番剧下载时使用。</p></div></div></main><footer class="VPDocFooter" data-v-bbd403a1 data-v-7e839658><!--[--><!--]--><div class="edit-info" data-v-7e839658><div class="edit-link" data-v-7e839658><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/yutto-dev/yutto/edit/main/docs/guide/cli.md" target="_blank" rel="noreferrer" data-v-7e839658><!--[--><span class="vpi-square-pen edit-link-icon" data-v-7e839658></span> 为此页提供修改建议<!--]--></a></div><!----></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-7e839658><span class="visually-hidden" id="doc-footer-aria-label" data-v-7e839658>Pager</span><div class="pager" data-v-7e839658><a class="VPLink link pager-link prev" href="/guide/supported-links.html" data-v-7e839658><!--[--><span class="desc" data-v-7e839658>Previous page</span><span class="title" data-v-7e839658>支持的链接</span><!--]--></a></div><div class="pager" data-v-7e839658><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-05341765 data-v-0d860afc><div class="container" data-v-0d860afc><p class="message" data-v-0d860afc>Released under the GPL3.0 License.</p><p class="copyright" data-v-0d860afc>Copyright © 2022-present Nyakku Shigure</p></div></footer><!--[--><!--]--></div><canvas></canvas><!--]--></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"guide_cli.md\":\"DXbEQzDD\",\"guide_quick-start.md\":\"DPjEEzQe\",\"guide_supported-links.md\":\"BwA4mYF4\",\"index.md\":\"SVXg3STp\",\"migration_index.md\":\"B4k0OowP\",\"readme.md\":\"Dzt9cZ85\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"yutto\",\"description\":\"yutto docs\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"指引\",\"link\":\"/guide/quick-start.html\"},{\"text\":\"迁移\",\"link\":\"/migration/\"}],\"sidebar\":{\"/guide\":[{\"text\":\"\",\"items\":[{\"text\":\"快速开始\",\"link\":\"/guide/quick-start.html\"},{\"text\":\"支持的链接\",\"link\":\"/guide/supported-links.html\"},{\"text\":\"命令行参数\",\"link\":\"/guide/cli.html\"}]}]},\"footer\":{\"message\":\"Released under the GPL3.0 License.\",\"copyright\":\"Copyright © 2022-present Nyakku Shigure\"},\"editLink\":{\"pattern\":\"https://github.com/yutto-dev/yutto/edit/main/docs/:path\",\"text\":\"为此页提供修改建议\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/yutto-dev/yutto\"},{\"icon\":\"discord\",\"link\":\"https://discord.gg/5cQGyFwsqC\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>